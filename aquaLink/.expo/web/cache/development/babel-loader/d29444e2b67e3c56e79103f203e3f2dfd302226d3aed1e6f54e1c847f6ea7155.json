{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { BarChart } from \"react-native-gifted-charts\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CompShowReports = function CompShowReports() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    reports = _useState2[0],\n    setReports = _useState2[1];\n  useEffect(function () {\n    getReports();\n  }, []);\n  var getReports = function () {\n    var _ref = _asyncToGenerator(function* () {\n      var res = yield fetch(\"http://10.0.2.2:8000/reports\");\n      var data = yield res.json();\n      setReports(data);\n    });\n    return function getReports() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var monthlyData = reports.reduce(function (acc, item) {\n    var date = new Date(item.date_hour);\n    var firstDayOfMonth = new Date(date.getFullYear(), date.getMonth(), 1);\n    var weekOfMonth = Math.ceil((date.getDate() + firstDayOfMonth.getDay()) / 7);\n    if (!acc[weekOfMonth]) {\n      acc[weekOfMonth] = 0;\n    }\n    acc[weekOfMonth] += item.totalLiters;\n    return acc;\n  }, {});\n  var barData = Object.entries(monthlyData).map(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      label = _ref3[0],\n      value = _ref3[1];\n    return {\n      value: value,\n      label: label,\n      topLabelComponent: function topLabelComponent() {\n        return _jsx(Text, {\n          style: {\n            color: \"blue\",\n            fontSize: 12,\n            marginTop: 4\n          },\n          children: value\n        });\n      }\n    };\n  });\n  return _jsxs(View, {\n    children: [_jsx(View, {}), _jsx(View, {\n      style: styles.barChart,\n      children: _jsx(BarChart, {\n        barWidth: 30,\n        noOfSections: 3,\n        barBorderRadius: 4,\n        frontColor: \"lightgray\",\n        data: barData,\n        yAxisThickness: 0,\n        xAxisThickness: 0,\n        labelStyle: {\n          fontSize: 6\n        }\n      })\n    })]\n  });\n};\nexport default CompShowReports;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  headerText: {\n    fontSize: 16,\n    marginBottom: 10\n  },\n  datePicker: {\n    marginBottom: 20\n  },\n  barChart: {\n    width: \"80%\"\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","useCallback","View","Text","StyleSheet","BarChart","jsx","_jsx","jsxs","_jsxs","CompShowReports","_useState","_useState2","_slicedToArray","reports","setReports","getReports","_ref","_asyncToGenerator","res","fetch","data","json","apply","arguments","monthlyData","reduce","acc","item","date","Date","date_hour","firstDayOfMonth","getFullYear","getMonth","weekOfMonth","Math","ceil","getDate","getDay","totalLiters","barData","Object","entries","map","_ref2","_ref3","label","value","topLabelComponent","style","color","fontSize","marginTop","children","styles","barChart","barWidth","noOfSections","barBorderRadius","frontColor","yAxisThickness","xAxisThickness","labelStyle","create","container","flex","justifyContent","alignItems","headerText","marginBottom","datePicker","width"],"sources":["C:/Users/alexm/OneDrive/Escritorio/Escuela/Taller De Inv 2/App/aquaLink/components/CompShowReports.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { View, Text, StyleSheet } from \"react-native\";\r\nimport { BarChart } from \"react-native-gifted-charts\";\r\n\r\nconst CompShowReports = () => {\r\n  const [reports, setReports] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getReports();\r\n  }, []);\r\n\r\n  const getReports = async () => {\r\n    const res = await fetch(\"http://10.0.2.2:8000/reports\");\r\n    const data = await res.json();\r\n    setReports(data);\r\n  };\r\n\r\n  // Agrupar los informes por semana y calcular la suma total de litros\r\n  const monthlyData = reports.reduce((acc, item) => {\r\n    const date = new Date(item.date_hour);\r\n    const firstDayOfMonth = new Date(date.getFullYear(), date.getMonth(), 1);\r\n\r\n    // Calcular el número de semana dentro del mes\r\n    const weekOfMonth = Math.ceil(\r\n      (date.getDate() + firstDayOfMonth.getDay()) / 7\r\n    );\r\n\r\n    // Acumula el total de litros de acuerdo a la semana, si cambia vuelve a cero\r\n    if (!acc[weekOfMonth]) {\r\n      acc[weekOfMonth] = 0;\r\n    }\r\n    acc[weekOfMonth] += item.totalLiters;\r\n\r\n    return acc;\r\n  }, {});\r\n\r\n  // Crear el arreglo de datos para la gráfica\r\n  const barData = Object.entries(monthlyData).map(([label, value]) => ({\r\n    value,\r\n    label,\r\n    topLabelComponent: () => (\r\n      <Text style={{ color: \"blue\", fontSize: 12, marginTop: 4 }}>{value}</Text>\r\n    ),\r\n  }));\r\n\r\n  return (\r\n    <View>\r\n      <View></View>\r\n      <View style={styles.barChart}>\r\n        <BarChart\r\n          barWidth={30} // Ajusta el ancho del gráfico a un valor mayor\r\n          noOfSections={3}\r\n          barBorderRadius={4}\r\n          frontColor=\"lightgray\"\r\n          data={barData}\r\n          yAxisThickness={0}\r\n          xAxisThickness={0}\r\n          labelStyle={{ fontSize: 6 }} // Ajusta el tamaño de fuente más pequeño para las etiquetas\r\n        />\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default CompShowReports;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  headerText: {\r\n    fontSize: 16,\r\n    marginBottom: 10,\r\n  },\r\n  datePicker: {\r\n    marginBottom: 20,\r\n  },\r\n  barChart: {\r\n    width: \"80%\",\r\n  },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}